import urllib.request
import sys
import re


banner = '''
            \033[31m;;;;;;;;;;;;;;;;;;;;\033[37m                                                                    
          \033[31m;;;;;;;;;;;;;;;;;;;;;;;;\033[37m   ###   ##              ########       ##                        
          \033[31m;;;;;;;;;;;;;;;;;;;;;;;;\033[37m   ###   ##              ########       ##                        
          \033[31m;;;;;;;;;;;;;;;;;;;;;;;;\033[37m    ##  ###                 ##          ##                        
          \033[31m;;;;;;;;;;;;;;;;;;;;;;;;;\033[37m   ##  ###                 ##          ##                        
         \033[31m;;;;;;;;;;\033[37mG\033[31m;;;;;;;;;;;;;;;\033[37m   ### ##  ####   ##  ###  ##  ##  ### ## ###    ###             
         \033[31m;;;;;;;;;;\033[37mG##\033[31m;;;;;;;;;;;;;\033[37m    ## ## ######  ##  ###  ##  ##  ### #######  #####            
         \033[31m;;;;;;;;;;\033[37mG####\033[31m;;;;;;;;;;;\033[37m    ## ## ### ##  ##  ###  ##  ##  ### ### ### ### ###           
         \033[31m;;;;;;;;;;\033[37mG#####\033[31m;;;;;;;;;;\033[37m    ####  ##  ### ##  ###  ##  ##  ### ##  ### ### ###           
         \033[31m;;;;;;;;;;\033[37mG#####\033[31m;;;;;;;;;;\033[37m    ####  ##  ### ##  ###  ##  ##  ### ##  ### ### ###           
         \033[31m;;;;;;;;;;\033[37mG####\033[31m;;;;;;;;;;;\033[37m     ###  ##  ### ##  ###  ##  ##  ### ##  ### #######           
         \033[31m;;;;;;;;;;\033[37mG##\033[31m;;;;;;;;;;;;;\033[37m     ###  ##  ### ##  ###  ##  ##  ### ##  ### #######           
         \033[31m;;;;;;;;;;\033[37mG\033[31m;;;;;;;;;;;;;;;\033[37m     ###  ##  ### ##  ###  ##  ##  ### ##  ### ###               
          \033[31m;;;;;;;;;;;;;;;;;;;;;;;;;\033[37m     ###  ##  ### ##  ###  ##  ##  ### ##  ### ### ###           
          \033[31m;;;;;;;;;;;;;;;;;;;;;;;;\033[37m      ###  ### ##  ### ###  ##  ##  ### ### ### ### ###           
          \033[31m;;;;;;;;;;;;;;;;;;;;;;;;\033[37m      ###  ######  #### ##  ##  ####### #######  #####            
           \033[31m;;;;;;;;;;;;;;;;;;;;;;\033[37m       ###   ####    ### ##  ##   ## ### ## ###    ###             
            \033[31m;;;;;;;;;;;;;;;;;;;;\033[0m                                                                    
'''

def get_results(query):
	
	prefix = 'https://vid.puffyan.us/watch?v='
	html = urllib.request.urlopen('https://vid.puffyan.us/search?q='+ query)
	video_ids = re.findall(r'watch\?v=(\S{11})',html.read().decode())
	
	for x in video_ids:
		print(prefix + x)
def download_the_video(link):
	urllib.request.urlretrieve('https://projectlounge.pw/ytdl/download?url=' + link)

if len(sys.argv) <= 1:

	print(banner)
	print('\nauthor: Ahmet Yigit AYDENIZ\n')

elif sys.argv[1] == 'download':
	
	download_the_video(sys.argv[2])

else:
	
	query = sys.argv[1]
	print(banner)	
	get_results(query)
	
